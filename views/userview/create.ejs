<!DOCTYPE html>
<html>
<head>
  <title>Create New User</title>
</head>
<body>
<%- include('../partials/header') %>
<section class="sectionmin">
  <h1  class="mainheading">Create New User</h1>
  <p class="maintext">
    Please fill in the details below to create a new user.
  </p>
  
  <form class="formpart" action="/users/create" method="post">
    <% if (error) { %>
      <aside class="errormessage"><%= error %></aside>
    <% } %>
    <% if (success) { %>
      <aside class="successmessage"><%= success %></aside>
      <script>
        setTimeout(() => {
          window.location.href = '/users';
        }, 2000); 
      </script>
    <% } %>
    <div>
        <label>Fullname:</label>
        <input 
            type="text" 
            name="fullname" 
            value="<%= data.fullname || '' %>"
        />
    </div>
    <div>
        <label>Mobile:</label>
        <input 
            type="text" 
            name="mobile" 
            value="<%= data.mobile || '' %>"
            maxlength="10"
        />
    </div>
    <div>
        <label>Email:</label>
        <input 
            type="test" 
            name="email" 
            value="<%= data.email || '' %>"
        />
    </div>
    <div>
        <label>Password:</label>
        <input 
            type="text" 
            name="password" 
            value="<%= data.password || '' %>"
        />
    </div>
    <div> 
        <label>Role:</label>
        <select name="role">
          <option value="" disabled <%= !data.role ? 'selected' : '' %>>Select</option>
          <option value="user" <%= data.role === 'user' ? 'selected' : '' %>>User</option>
          <option value="admin" <%= data.role === 'admin' ? 'selected' : '' %>>Admin</option>
          <option value="superadmin" <%= data.role === 'superadmin' ? 'selected' : '' %>>Superadmin</option>
        </select>
    </div>
    <div>
      <button type="submit">Submit</button>
    </div>
  </form>
</section>
<%- include('../partials/footer', { title: 'EMP Management System' }) %>
</body>
</html>
